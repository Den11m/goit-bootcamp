"use strict";var keyLinkPreview="5af3ee3b2ae36d7729b60340108b41f64a8af2fb59920",inputInfoUrl=document.querySelector(".url"),btnAdd=document.querySelector(".btn"),arrBookmark=void 0;function handleCreateCardLocalStorage(){if(0<arrBookmark.length){var r=!0,e=!1,t=void 0;try{for(var a,n=arrBookmark[Symbol.iterator]();!(r=(a=n.next()).done);r=!0){var o=a.value;fetch("http://api.linkpreview.net/?key="+keyLinkPreview+"&q=https:"+o).then(function(r){return r.json()}).then(function(r){return createCard(r)})}}catch(r){e=!0,t=r}finally{try{!r&&n.return&&n.return()}finally{if(e)throw t}}}}function handleCreateCard(){arrBookmark.includes(inputInfoUrl.value)?alert("такая закладка уже есть"):(arrBookmark.push(inputInfoUrl.value),fetch("http://api.linkpreview.net/?key="+keyLinkPreview+"&q=https:"+inputInfoUrl.value).then(function(r){return r.json()}).then(function(r){return createCard(r)}),localStorage.setItem("arrBookmark",JSON.stringify(arrBookmark)),console.log(arrBookmark))}arrBookmark=null===JSON.parse(localStorage.getItem("arrBookmark"))?[]:JSON.parse(localStorage.getItem("arrBookmark")),document.addEventListener("DOMContentLoaded",handleCreateCardLocalStorage),btnAdd.addEventListener("click",handleCreateCard);var bodyCard=document.querySelector(".body__card");function createCard(r){var e='\n    <div class="card">\n        <button class="close" name='+inputInfoUrl.value+">x</button>\n        <img src="+r.image+' alt="" class="img">\n        <p class="description">'+r.description+"</p>\n        <a href="+r.url+' class="link" target="_blank">'+r.title+"</a>\n    </div>\n    ";return bodyCard.insertAdjacentHTML("afterbegin",e)}function handleDeleteCard(e){e.target.parentElement.remove(),arrBookmark=arrBookmark.filter(function(r){return r!==e.target.attributes.name.textContent}),localStorage.setItem("arrBookmark",JSON.stringify(arrBookmark)),console.log(arrBookmark)}bodyCard.addEventListener("click",handleDeleteCard);